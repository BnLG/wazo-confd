paths:
  /guests/{guest_uuid}/meetings/{meeting_uuid}/authorizations:
    post:
      operationId: create_guest_meeting_authorization
      summary: Request guest authorization to enter a meeting
      description: '**Required ACL:** none'
      tags:
      - meeting_authorizations
      - meetings
      - guests
      parameters:
      - $ref: '#/parameters/guest_uuid'
      - $ref: '#/parameters/meeting_uuid'
      - name: body
        in: body
        description: Details to request authorization
        required: true
        schema:
          $ref: '#/definitions/MeetingAuthorizationRequest'
      responses:
        '201':
          description: Authorization created
          schema:
            $ref: '#/definitions/MeetingAuthorization'
        '400':
          $ref: '#/responses/CreateError'
        '404':
          $ref: '#/responses/NotFoundError'

definitions:
  MeetingAuthorizationRequest:
    type: object
    properties:
      guest_name:
        type: string
  MeetingAuthorization:
    type: object
    properties:
      uuid:
        type: string
        format: uuid
      guest_name:
        type: string
      created_at:
        type: string
        format: date-time
      status:
        type: string
        enum:
          - pending
          - accepted
          - rejected
      sip_authorization:
        type: string

parameters:
  guest_uuid:
    required: true
    name: guest_uuid
    in: path
    type: string
    description: Guest UUID. It must be generated by the guest.
  meeting_uuid:
    required: true
    name: meeting_uuid
    in: path
    type: string
    description: Meeting UUID
